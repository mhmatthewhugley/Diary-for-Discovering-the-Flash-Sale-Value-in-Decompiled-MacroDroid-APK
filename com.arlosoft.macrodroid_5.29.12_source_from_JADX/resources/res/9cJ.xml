<?xml version="1.0" encoding="utf-8"?>
<androidx.coordinatorlayout.widget.CoordinatorLayout xmlns:android="http://schemas.android.com/apk/res/android" xmlns:app="http://schemas.android.com/apk/res-auto" xmlns:aapt="http://schemas.android.com/aapt" android:layout_width="match_parent" android:layout_height="match_parent">
    <com.google.android.material.appbar.AppBarLayout android:id="@+id/appBarLayout" android:background="@color/plugins_primary" android:fitsSystemWindows="true" android:layout_width="match_parent" android:layout_height="wrap_content" android:elevation="@dimen/toolbar_elevation">
        <com.google.android.material.appbar.CollapsingToolbarLayout android:layout_width="match_parent" android:layout_height="match_parent" android:elevation="@dimen/toolbar_elevation" app:layout_scrollFlags="3">
            <net.cachapa.expandablelayout.ExpandableLayout android:id="@+id/descriptionExpandable" android:background="@color/actions_primary" android:layout_width="match_parent" android:layout_height="wrap_content" android:layout_marginTop="?attr/actionBarSize" app:el_duration="500" app:el_expanded="true" app:el_parallax="1" app:layout_scrollFlags="1">
                <androidx.appcompat.widget.AppCompatEditText android:theme="@style/Theme.App.Toolbar" android:textSize="14sp" android:textColor="@color/nearly_white" android:textColorHint="@color/white_transparent" android:id="@+id/description" android:background="@android:color/transparent" android:paddingTop="@dimen/margin_tiny" android:paddingBottom="@dimen/margin_small" android:layout_width="match_parent" android:layout_height="wrap_content" android:hint="@string/enter_description_title" android:maxLength="1200" android:inputType="none|text|textCapSentences|textMultiLine" android:alpha="1" android:textCursorDrawable="@null" android:layout_marginStart="@dimen/margin_medium" android:layout_marginEnd="@dimen/margin_medium"/>
            </net.cachapa.expandablelayout.ExpandableLayout>
            <androidx.appcompat.widget.Toolbar android:theme="@style/Toolbar" android:id="@+id/toolbar" android:background="@color/actions_primary" android:layout_width="match_parent" android:layout_height="?attr/actionBarSize" android:layout_marginStart="-16dp" app:layout_collapseMode="1" app:titleTextAppearance="@style/TitleToolbarText">
                <LinearLayout android:orientation="horizontal" android:layout_width="match_parent" android:layout_height="wrap_content">
                    <ImageButton android:layout_gravity="left|center_vertical|center_horizontal|center|start" android:id="@+id/actionBack" android:layout_width="48dp" android:layout_height="48dp" app:srcCompat="@drawable/material_ic_arrow_back_24px_svg" style="@style/Widget.AppCompat.ActionButton"/>
                    <EditText android:textSize="18sp" android:textColor="@color/white" android:textColorHighlight="#40ffffff" android:textColorHint="#88ffffff" android:id="@+id/actionBlockNameText" android:layout_width="wrap_content" android:layout_height="wrap_content" android:hint="@string/action_block_name" android:cursorVisible="true" android:singleLine="true" android:layout_weight="1" android:inputType="textCapSentences" android:imeOptions="actionDone" android:textCursorDrawable="@null" android:fontFamily="@font/heading_font" android:textDirection="locale" android:paddingStart="4dp" android:backgroundTint="@color/edit_macro_bg_tint"/>
                </LinearLayout>
            </androidx.appcompat.widget.Toolbar>
        </com.google.android.material.appbar.CollapsingToolbarLayout>
    </com.google.android.material.appbar.AppBarLayout>
    <androidx.core.widget.NestedScrollView android:id="@+id/scrollView" android:clipToPadding="false" android:layout_width="match_parent" android:layout_height="wrap_content" android:fillViewport="true" app:layout_behavior="@string/appbar_scrolling_view_behavior">
        <LinearLayout android:orientation="vertical" android:id="@+id/topLayout" android:layout_width="match_parent" android:layout_height="match_parent">
            <net.cachapa.expandablelayout.ExpandableLayout android:id="@+id/nearbySharePanel" android:layout_width="match_parent" android:layout_height="wrap_content" app:el_duration="1000" app:el_expanded="false" app:el_parallax="0.5" app:layout_constraintEnd_toEndOf="0" app:layout_constraintStart_toStartOf="0" app:layout_constraintTop_toBottomOf="@+id/remediesHeader">
                <androidx.constraintlayout.widget.ConstraintLayout android:id="@+id/infoBarBg" android:background="@color/md_light_blue_600" android:paddingBottom="@dimen/margin_small" android:visibility="visible" android:layout_width="match_parent" android:layout_height="wrap_content">
                    <ImageView android:id="@+id/nearbyImage" android:layout_width="wrap_content" android:layout_height="wrap_content" android:src="@drawable/google_nearby" android:layout_marginStart="@dimen/margin_small" app:layout_constraintBottom_toBottomOf="@+id/shareNearbyText" app:layout_constraintStart_toStartOf="0" app:layout_constraintTop_toTopOf="@+id/shareNearbyText"/>
                    <TextView android:textSize="14sp" android:textColor="@color/white" android:id="@+id/shareNearbyText" android:layout_width="0dp" android:layout_height="wrap_content" android:layout_marginTop="@dimen/margin_small" android:text="@string/share_nearby_instruction_action_block" android:layout_marginStart="@dimen/margin_small" app:layout_constraintEnd_toStartOf="@+id/dismissButton" app:layout_constraintHorizontal_bias="0" app:layout_constraintStart_toEndOf="@+id/nearbyImage" app:layout_constraintTop_toTopOf="0"/>
                    <Button android:textSize="16sp" android:textColor="@color/white" android:id="@+id/deviceButton" android:visibility="gone" android:layout_width="wrap_content" android:layout_height="wrap_content" android:layout_marginTop="@dimen/margin_small" app:layout_constraintEnd_toEndOf="0" app:layout_constraintTop_toBottomOf="@+id/shareNearbyText" style="?attr/borderlessButtonStyle"/>
                    <ImageView android:id="@+id/dismissButton" android:background="?attr/selectableItemBackgroundBorderless" android:padding="10dp" android:focusable="true" android:clickable="true" android:layout_width="@dimen/home_info_dismiss_button_size" android:layout_height="@dimen/home_info_dismiss_button_size" app:layout_constraintEnd_toEndOf="0" app:layout_constraintTop_toTopOf="0" app:srcCompat="@drawable/material_ic_clear_24px_svg"/>
                    <ProgressBar android:id="@+id/scanningSpinner" android:layout_width="24dp" android:layout_height="24dp" android:indeterminate="true" android:layout_marginEnd="@dimen/margin_small" android:indeterminateTint="@color/white" app:layout_constraintBottom_toBottomOf="0" app:layout_constraintEnd_toEndOf="0" app:layout_constraintTop_toBottomOf="@+id/dismissButton"/>
                </androidx.constraintlayout.widget.ConstraintLayout>
            </net.cachapa.expandablelayout.ExpandableLayout>
            <LinearLayout android:orientation="vertical" android:id="@+id/topLevelLayout" android:paddingBottom="@dimen/local_var_bottom_bar_height" android:visibility="gone" android:layout_width="match_parent" android:layout_height="match_parent" android:splitMotionEvents="false" android:animateLayoutChanges="true">
                <androidx.cardview.widget.CardView android:id="@+id/inputVarsContainer" android:layout_width="match_parent" android:layout_height="wrap_content" android:layout_marginLeft="@dimen/margin_small" android:layout_marginTop="@dimen/margin_small" android:layout_marginRight="@dimen/margin_small" app:cardBackgroundColor="@color/input_vars_primary" app:cardCornerRadius="8dp">
                    <LinearLayout android:orientation="vertical" android:id="@+id/inputTopLevelLinearLayout" android:layout_width="match_parent" android:layout_height="wrap_content">
                        <View android:background="@color/local_vars_seperator" android:layout_width="match_parent" android:layout_height="1dp"/>
                        <LinearLayout android:orientation="horizontal" android:focusable="true" android:clickable="true" android:layout_width="match_parent" android:layout_height="52dp" android:splitMotionEvents="false" android:paddingStart="8dp">
                            <TextView android:textColor="@android:color/white" android:gravity="left|center_vertical|center_horizontal|center|start" android:id="@+id/inputVariablesHeading" android:paddingTop="4dp" android:paddingBottom="4dp" android:layout_width="match_parent" android:layout_height="match_parent" android:text="@string/input_variables_with_count" android:maxLines="1" android:layout_weight="1" android:fontFamily="@font/helvetica_standard" android:textDirection="locale" android:paddingStart="4dp" android:paddingEnd="8dp" app:autoSizeMaxTextSize="18sp" app:autoSizeMinTextSize="10sp" app:autoSizeTextType="1"/>
                            <ImageButton android:id="@+id/inputCollapseExpandButton" android:background="?attr/selectableItemBackgroundBorderless" android:layout_width="48dp" android:layout_height="48dp" android:src="@drawable/ic_arrow_down" android:contentDescription="@string/button_description_expand"/>
                            <ImageButton android:id="@+id/addInputVariableButton" android:background="?attr/selectableItemBackgroundBorderless" android:layout_width="48dp" android:layout_height="48dp" android:src="@drawable/ic_plus_white_24dp" android:contentDescription="@string/add_trigger"/>
                        </LinearLayout>
                        <FrameLayout android:id="@+id/inputVarsContent" android:paddingBottom="2dp" android:visibility="gone" android:layout_width="match_parent" android:layout_height="wrap_content">
                            <View android:background="@color/hairline_header" android:layout_width="match_parent" android:layout_height="1px" android:layout_marginLeft="8dp" android:layout_marginRight="8dp"/>
                            <TextView android:textSize="@dimen/no_item_text_size" android:textColor="@android:color/white" android:ellipsize="end" android:gravity="center" android:id="@+id/noInputVarsText" android:padding="@dimen/margin_medium" android:focusable="true" android:visibility="visible" android:clickable="true" android:layout_width="match_parent" android:layout_height="match_parent" android:layout_marginTop="2dp" android:text="@string/no_variables" android:singleLine="true" android:textDirection="locale"/>
                            <androidx.recyclerview.widget.RecyclerView android:id="@+id/inputVarsList" android:layout_width="match_parent" android:layout_height="wrap_content" android:layout_marginTop="2dp" android:paddingStart="@dimen/edit_entries_list_padding" android:paddingEnd="@dimen/edit_entries_list_padding" app:layoutManager="androidx.recyclerview.widget.LinearLayoutManager"/>
                        </FrameLayout>
                    </LinearLayout>
                </androidx.cardview.widget.CardView>
                <androidx.cardview.widget.CardView android:id="@+id/actionsContainer" android:layout_width="match_parent" android:layout_height="wrap_content" android:layout_marginLeft="@dimen/margin_small" android:layout_marginTop="@dimen/margin_small" android:layout_marginRight="@dimen/margin_small" android:layout_marginBottom="@dimen/margin_small" app:cardBackgroundColor="@color/actions_primary" app:cardCornerRadius="8dp">
                    <LinearLayout android:orientation="vertical" android:layout_width="match_parent" android:layout_height="match_parent">
                        <LinearLayout android:id="@+id/actionLayout" android:background="@color/actions_primary" android:layout_width="match_parent" android:layout_height="wrap_content" android:splitMotionEvents="false" android:paddingStart="8dp">
                            <TextView android:textSize="18sp" android:textColor="@android:color/white" android:layout_gravity="center_vertical" android:paddingTop="4dp" android:paddingBottom="4dp" android:layout_width="0dp" android:layout_height="wrap_content" android:text="@string/actions" android:layout_weight="1" android:fontFamily="@font/helvetica_standard" android:paddingStart="4dp" android:paddingEnd="8dp"/>
                            <ImageButton android:layout_gravity="center_vertical" android:id="@+id/pasteActionButton" android:background="?attr/selectableItemBackgroundBorderless" android:visibility="gone" android:layout_width="48dp" android:layout_height="48dp" android:src="@drawable/ic_content_paste_white_24dp" android:contentDescription="@string/item_pasted"/>
                            <ImageButton android:layout_gravity="center_vertical" android:id="@+id/reorderActionsButton" android:background="?attr/selectableItemBackgroundBorderless" android:visibility="gone" android:layout_width="48dp" android:layout_height="48dp" android:src="@drawable/ic_swap_vertical_white_24dp" android:contentDescription="@string/reorder_actions"/>
                            <ImageButton android:layout_gravity="center_vertical" android:id="@+id/addActionButton" android:background="?attr/selectableItemBackgroundBorderless" android:layout_width="48dp" android:layout_height="48dp" android:src="@drawable/ic_plus_white_24dp" android:contentDescription="@string/add_action"/>
                        </LinearLayout>
                        <View android:background="@color/hairline_header" android:layout_width="match_parent" android:layout_height="1px" android:layout_marginLeft="8dp" android:layout_marginRight="8dp" android:layout_marginBottom="2dp"/>
                        <TextView android:textSize="@dimen/no_item_text_size" android:textColor="@android:color/white" android:ellipsize="end" android:gravity="center" android:id="@+id/noActionsText" android:padding="@dimen/margin_medium" android:visibility="gone" android:layout_width="match_parent" android:layout_height="match_parent" android:text="@string/no_actions" android:singleLine="true" android:textDirection="locale"/>
                        <com.arlosoft.macrodroid.widget.SelectableItemsRecyclerView android:id="@+id/actionsList" android:layout_width="match_parent" android:layout_height="wrap_content" android:paddingStart="@dimen/edit_entries_list_padding" android:paddingEnd="@dimen/edit_entries_list_padding"/>
                    </LinearLayout>
                </androidx.cardview.widget.CardView>
                <androidx.cardview.widget.CardView android:id="@+id/outputVarsContainer" android:layout_width="match_parent" android:layout_height="wrap_content" android:layout_marginLeft="@dimen/margin_small" android:layout_marginRight="@dimen/margin_small" android:layout_marginBottom="@dimen/margin_small" app:cardBackgroundColor="@color/input_vars_primary" app:cardCornerRadius="8dp">
                    <LinearLayout android:orientation="vertical" android:id="@+id/outputTopLevelLinearLayout" android:layout_width="match_parent" android:layout_height="wrap_content">
                        <View android:background="@color/local_vars_seperator" android:layout_width="match_parent" android:layout_height="1dp"/>
                        <LinearLayout android:orientation="horizontal" android:focusable="true" android:clickable="true" android:layout_width="match_parent" android:layout_height="52dp" android:splitMotionEvents="false" android:paddingStart="8dp">
                            <TextView android:textColor="@android:color/white" android:gravity="left|center_vertical|center_horizontal|center|start" android:id="@+id/outputVariablesHeading" android:paddingTop="4dp" android:paddingBottom="4dp" android:layout_width="match_parent" android:layout_height="match_parent" android:text="@string/output_variables_with_count" android:maxLines="1" android:layout_weight="1" android:fontFamily="@font/helvetica_standard" android:textDirection="locale" android:paddingStart="4dp" android:paddingEnd="8dp" app:autoSizeMaxTextSize="18sp" app:autoSizeMinTextSize="10sp" app:autoSizeTextType="1"/>
                            <ImageButton android:id="@+id/outputCollapseExpandButton" android:background="?attr/selectableItemBackgroundBorderless" android:layout_width="48dp" android:layout_height="48dp" android:src="@drawable/ic_arrow_down" android:contentDescription="@string/button_description_expand"/>
                            <ImageButton android:layout_gravity="right|center_vertical|center_horizontal|center|end" android:id="@+id/addOutputVariableButton" android:background="?attr/selectableItemBackgroundBorderless" android:layout_width="48dp" android:layout_height="48dp" android:src="@drawable/ic_plus_white_24dp" android:contentDescription="@string/add_trigger"/>
                        </LinearLayout>
                        <FrameLayout android:id="@+id/outputVarsContent" android:paddingBottom="2dp" android:visibility="gone" android:layout_width="match_parent" android:layout_height="wrap_content">
                            <View android:background="@color/hairline_header" android:layout_width="match_parent" android:layout_height="1px" android:layout_marginLeft="8dp" android:layout_marginRight="8dp"/>
                            <TextView android:textSize="@dimen/no_item_text_size" android:textColor="@android:color/white" android:ellipsize="end" android:gravity="center" android:id="@+id/noOutputVarsText" android:padding="@dimen/margin_medium" android:focusable="true" android:visibility="visible" android:clickable="true" android:layout_width="match_parent" android:layout_height="match_parent" android:layout_marginTop="2dp" android:text="@string/no_variables" android:singleLine="true" android:textDirection="locale"/>
                            <androidx.recyclerview.widget.RecyclerView android:id="@+id/outputVarsList" android:layout_width="match_parent" android:layout_height="wrap_content" android:layout_marginTop="2dp" android:paddingStart="@dimen/edit_entries_list_padding" android:paddingEnd="@dimen/edit_entries_list_padding" app:layoutManager="androidx.recyclerview.widget.LinearLayoutManager"/>
                        </FrameLayout>
                    </LinearLayout>
                </androidx.cardview.widget.CardView>
                <androidx.cardview.widget.CardView android:id="@+id/localVarsContainer" android:layout_width="match_parent" android:layout_height="wrap_content" android:layout_marginLeft="@dimen/margin_small" android:layout_marginRight="@dimen/margin_small" android:layout_marginBottom="@dimen/margin_small" app:cardBackgroundColor="@color/input_vars_primary" app:cardCornerRadius="8dp">
                    <LinearLayout android:orientation="vertical" android:id="@+id/localTopLevelLinearLayout" android:layout_width="match_parent" android:layout_height="wrap_content">
                        <View android:background="@color/local_vars_seperator" android:layout_width="match_parent" android:layout_height="1dp"/>
                        <LinearLayout android:orientation="horizontal" android:focusable="true" android:clickable="true" android:layout_width="match_parent" android:layout_height="52dp" android:splitMotionEvents="false" android:paddingStart="8dp">
                            <TextView android:textColor="@android:color/white" android:gravity="left|center_vertical|center_horizontal|center|start" android:id="@+id/localVariablesHeading" android:paddingTop="4dp" android:paddingBottom="4dp" android:layout_width="match_parent" android:layout_height="match_parent" android:text="@string/local_variables" android:maxLines="1" android:layout_weight="1" android:fontFamily="@font/helvetica_standard" android:textDirection="locale" android:paddingStart="4dp" android:paddingEnd="8dp" app:autoSizeMaxTextSize="18sp" app:autoSizeMinTextSize="10sp" app:autoSizeTextType="1"/>
                            <ImageButton android:id="@+id/localCollapseExpandButton" android:background="?attr/selectableItemBackgroundBorderless" android:layout_width="48dp" android:layout_height="48dp" android:src="@drawable/ic_arrow_down" android:contentDescription="@string/button_description_expand"/>
                            <ImageButton android:layout_gravity="right|center_vertical|center_horizontal|center|end" android:id="@+id/addLocalVariableButton" android:background="?attr/selectableItemBackgroundBorderless" android:layout_width="48dp" android:layout_height="48dp" android:src="@drawable/ic_plus_white_24dp" android:contentDescription="@string/add_trigger"/>
                        </LinearLayout>
                        <FrameLayout android:id="@+id/localVarsContent" android:paddingBottom="2dp" android:visibility="gone" android:layout_width="match_parent" android:layout_height="wrap_content">
                            <View android:background="@color/hairline_header" android:layout_width="match_parent" android:layout_height="1px" android:layout_marginLeft="8dp" android:layout_marginRight="8dp"/>
                            <TextView android:textSize="@dimen/no_item_text_size" android:textColor="@android:color/white" android:ellipsize="end" android:gravity="center" android:id="@+id/noLocalVarsText" android:padding="@dimen/margin_medium" android:focusable="true" android:visibility="visible" android:clickable="true" android:layout_width="match_parent" android:layout_height="match_parent" android:layout_marginTop="2dp" android:text="@string/no_variables" android:singleLine="true" android:textDirection="locale"/>
                            <androidx.recyclerview.widget.RecyclerView android:id="@+id/localVarsList" android:layout_width="match_parent" android:layout_height="wrap_content" android:layout_marginTop="2dp" android:paddingStart="@dimen/edit_entries_list_padding" android:paddingEnd="@dimen/edit_entries_list_padding" app:layoutManager="androidx.recyclerview.widget.LinearLayoutManager"/>
                        </FrameLayout>
                    </LinearLayout>
                </androidx.cardview.widget.CardView>
            </LinearLayout>
        </LinearLayout>
    </androidx.core.widget.NestedScrollView>
    <com.google.android.material.floatingactionbutton.FloatingActionButton android:layout_gravity="bottom|right|center_vertical|center_horizontal|center|end" android:id="@+id/acceptButton" android:layout_width="wrap_content" android:layout_height="wrap_content" android:layout_marginBottom="@dimen/margin_medium" android:src="@drawable/ic_action_accept_white" android:tint="@color/actions_primary" android:contentDescription="@string/accept" android:layout_marginEnd="@dimen/margin_medium" android:backgroundTint="@color/white"/>
    <FrameLayout android:id="@+id/content_overlay" android:visibility="gone" android:layout_width="match_parent" android:layout_height="match_parent"/>
</androidx.coordinatorlayout.widget.CoordinatorLayout>
