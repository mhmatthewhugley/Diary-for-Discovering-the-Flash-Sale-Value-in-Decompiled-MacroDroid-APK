<?xml version="1.0" encoding="utf-8"?>
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android" xmlns:app="http://schemas.android.com/apk/res-auto" xmlns:aapt="http://schemas.android.com/aapt" android:layout_width="match_parent" android:layout_height="match_parent">
    <androidx.coordinatorlayout.widget.CoordinatorLayout android:id="@+id/editMacroContainer" android:layout_width="match_parent" android:layout_height="match_parent">
        <com.google.android.material.appbar.AppBarLayout android:id="@+id/appBar" android:layout_width="match_parent" android:layout_height="wrap_content" android:elevation="@dimen/toolbar_elevation">
            <com.google.android.material.appbar.CollapsingToolbarLayout android:layout_width="match_parent" android:layout_height="match_parent" app:layout_scrollFlags="3">
                <net.cachapa.expandablelayout.ExpandableLayout android:id="@+id/descriptionExpandable" android:background="@color/primary" android:layout_width="match_parent" android:layout_height="wrap_content" android:layout_marginTop="?attr/actionBarSize" app:el_duration="500" app:el_expanded="false" app:el_parallax="1" app:layout_scrollFlags="1">
                    <androidx.appcompat.widget.AppCompatEditText android:theme="@style/Theme.App.Toolbar" android:textSize="14sp" android:textColor="@color/nearly_white" android:textColorHint="#88ffffff" android:id="@+id/macroDescription" android:background="@android:color/transparent" android:paddingTop="@dimen/margin_tiny" android:paddingBottom="@dimen/margin_small" android:layout_width="match_parent" android:layout_height="wrap_content" android:hint="@string/enter_macro_description" android:maxLength="1200" android:inputType="none|text|textCapSentences|textMultiLine" android:alpha="1" android:textCursorDrawable="@null" android:textDirection="locale" android:layout_marginStart="@dimen/margin_medium" android:layout_marginEnd="@dimen/margin_medium"/>
                </net.cachapa.expandablelayout.ExpandableLayout>
                <androidx.appcompat.widget.Toolbar android:theme="@style/Toolbar" android:id="@+id/toolbar" android:background="@color/primary" android:layout_width="match_parent" android:layout_height="?attr/actionBarSize" android:layoutDirection="locale" android:layout_marginStart="-16dp" app:layout_collapseMode="1" app:titleTextAppearance="@style/HelveticaToolbarText.Main">
                    <LinearLayout android:orientation="horizontal" android:layout_width="match_parent" android:layout_height="wrap_content">
                        <ImageButton android:layout_gravity="left|center_vertical|center_horizontal|center|start" android:id="@+id/actionBack" android:layout_width="48dp" android:layout_height="48dp" app:srcCompat="@drawable/material_ic_arrow_back_24px_svg" style="@style/Widget.AppCompat.ActionButton"/>
                        <EditText android:theme="@style/Theme.App.Toolbar" android:textSize="18sp" android:textColor="@color/white" android:textColorHighlight="#40ffffff" android:textColorHint="#88ffffff" android:id="@+id/macroNameText" android:layout_width="wrap_content" android:layout_height="wrap_content" android:hint="@string/enter_macro_name" android:singleLine="true" android:layout_weight="1" android:inputType="textCapSentences" android:imeOptions="actionDone" android:fontFamily="@font/heading_font" android:textDirection="locale" android:paddingStart="4dp" android:backgroundTint="@color/edit_macro_bg_tint"/>
                    </LinearLayout>
                </androidx.appcompat.widget.Toolbar>
            </com.google.android.material.appbar.CollapsingToolbarLayout>
            <LinearLayout android:orientation="horizontal" android:id="@+id/disabledLabel" android:background="@drawable/disabled_macro_bg" android:visibility="gone" android:layout_width="match_parent" android:layout_height="wrap_content">
                <TextView android:textStyle="bold" android:textColor="@color/white" android:gravity="center" android:paddingTop="@dimen/margin_small" android:paddingBottom="@dimen/margin_small" android:layout_width="match_parent" android:layout_height="wrap_content" android:layout_marginLeft="@dimen/margin_small" android:layout_marginRight="@dimen/margin_small" android:text="@string/disabled" android:textAllCaps="true"/>
            </LinearLayout>
        </com.google.android.material.appbar.AppBarLayout>
        <com.arlosoft.macrodroid.widget.LockableScrollView android:id="@+id/scrollView" android:clipToPadding="false" android:layout_width="match_parent" android:layout_height="wrap_content" android:fillViewport="true" app:layout_behavior="@string/appbar_scrolling_view_behavior">
            <LinearLayout android:orientation="vertical" android:id="@+id/topLevelLayout" android:paddingBottom="@dimen/local_var_bottom_bar_height" android:layout_width="match_parent" android:layout_height="match_parent" android:splitMotionEvents="false" android:animateLayoutChanges="true">
                <net.cachapa.expandablelayout.ExpandableLayout android:id="@+id/nearbySharePanel" android:layout_width="match_parent" android:layout_height="wrap_content" app:el_duration="1000" app:el_expanded="false" app:el_parallax="0.5" app:layout_constraintEnd_toEndOf="0" app:layout_constraintStart_toStartOf="0" app:layout_constraintTop_toBottomOf="@+id/remediesHeader">
                    <androidx.constraintlayout.widget.ConstraintLayout android:id="@+id/infoBarBg" android:background="@color/md_light_blue_600" android:paddingBottom="@dimen/margin_small" android:visibility="visible" android:layout_width="match_parent" android:layout_height="wrap_content">
                        <ImageView android:id="@+id/nearbyImage" android:layout_width="wrap_content" android:layout_height="wrap_content" android:src="@drawable/google_nearby" android:layout_marginStart="@dimen/margin_small" app:layout_constraintBottom_toBottomOf="@+id/shareNearbyText" app:layout_constraintStart_toStartOf="0" app:layout_constraintTop_toTopOf="@+id/shareNearbyText"/>
                        <TextView android:textSize="14sp" android:textColor="@color/white" android:id="@+id/shareNearbyText" android:layout_width="0dp" android:layout_height="wrap_content" android:layout_marginTop="@dimen/margin_small" android:text="@string/share_nearby_instruction_macro" android:layout_marginStart="@dimen/margin_small" app:layout_constraintEnd_toStartOf="@+id/dismissButton" app:layout_constraintHorizontal_bias="0" app:layout_constraintStart_toEndOf="@+id/nearbyImage" app:layout_constraintTop_toTopOf="0"/>
                        <ImageView android:id="@+id/dismissButton" android:background="?attr/selectableItemBackgroundBorderless" android:padding="10dp" android:focusable="true" android:clickable="true" android:layout_width="@dimen/home_info_dismiss_button_size" android:layout_height="@dimen/home_info_dismiss_button_size" app:layout_constraintEnd_toEndOf="0" app:layout_constraintTop_toTopOf="0" app:srcCompat="@drawable/material_ic_clear_24px_svg"/>
                        <ProgressBar android:id="@+id/scanningSpinner" android:layout_width="24dp" android:layout_height="24dp" android:indeterminate="true" android:layout_marginEnd="@dimen/margin_small" android:indeterminateTint="@color/white" app:layout_constraintBottom_toBottomOf="0" app:layout_constraintEnd_toEndOf="0" app:layout_constraintTop_toBottomOf="@+id/dismissButton"/>
                    </androidx.constraintlayout.widget.ConstraintLayout>
                </net.cachapa.expandablelayout.ExpandableLayout>
                <androidx.cardview.widget.CardView android:id="@+id/triggersContainer" android:layout_width="match_parent" android:layout_height="wrap_content" android:layout_marginLeft="@dimen/margin_small" android:layout_marginTop="@dimen/margin_small" android:layout_marginRight="@dimen/margin_small" app:cardBackgroundColor="@color/trigger_primary" app:cardCornerRadius="8dp">
                    <LinearLayout android:orientation="vertical" android:layout_width="match_parent" android:layout_height="match_parent">
                        <LinearLayout android:id="@+id/triggerLinearLayout" android:background="@color/trigger_primary" android:layout_width="match_parent" android:layout_height="wrap_content" android:splitMotionEvents="false" android:paddingStart="4dp">
                            <TextView android:textSize="18sp" android:textColor="@android:color/white" android:layout_gravity="center_vertical" android:paddingTop="4dp" android:paddingBottom="4dp" android:layout_width="0dp" android:layout_height="wrap_content" android:text="@string/triggers" android:layout_weight="1" android:fontFamily="@font/helvetica_standard" android:paddingStart="4dp" android:paddingEnd="8dp"/>
                            <ImageButton android:layout_gravity="center_vertical" android:id="@+id/pasteTriggerButton" android:background="?attr/selectableItemBackgroundBorderless" android:padding="4dp" android:visibility="gone" android:layout_width="wrap_content" android:layout_height="wrap_content" android:src="@drawable/ic_content_paste_white_24dp" android:contentDescription="@string/item_pasted"/>
                            <ImageButton android:layout_gravity="center_vertical" android:id="@+id/reorderTriggersButton" android:background="?attr/selectableItemBackgroundBorderless" android:visibility="gone" android:layout_width="48dp" android:layout_height="48dp" android:src="@drawable/ic_swap_vertical_white_24dp" android:contentDescription="@string/reorder"/>
                            <ImageButton android:id="@+id/edit_macro_addTriggerButton" android:background="?attr/selectableItemBackgroundBorderless" android:layout_width="48dp" android:layout_height="48dp" android:src="@drawable/ic_plus_white_24dp" android:contentDescription="@string/add_trigger"/>
                        </LinearLayout>
                        <View android:background="@color/hairline_header" android:layout_width="match_parent" android:layout_height="1px" android:layout_marginLeft="8dp" android:layout_marginRight="8dp" android:layout_marginBottom="2dp"/>
                        <TextView android:textSize="@dimen/no_item_text_size" android:textColor="@android:color/white" android:ellipsize="end" android:gravity="center" android:id="@+id/noTriggersText" android:padding="@dimen/margin_medium" android:visibility="gone" android:layout_width="match_parent" android:layout_height="match_parent" android:text="@string/no_triggers" android:singleLine="true"/>
                        <com.arlosoft.macrodroid.widget.SelectableItemsRecyclerView android:id="@+id/triggersList" android:layout_width="match_parent" android:layout_height="wrap_content" android:paddingStart="@dimen/edit_entries_list_padding" android:paddingEnd="@dimen/edit_entries_list_padding"/>
                    </LinearLayout>
                </androidx.cardview.widget.CardView>
                <androidx.cardview.widget.CardView android:id="@+id/actionsContainer" android:layout_width="match_parent" android:layout_height="wrap_content" android:layout_marginLeft="@dimen/margin_small" android:layout_marginTop="@dimen/margin_small" android:layout_marginRight="@dimen/margin_small" android:layout_marginBottom="@dimen/margin_small" app:cardBackgroundColor="@color/actions_primary" app:cardCornerRadius="8dp">
                    <LinearLayout android:orientation="vertical" android:layout_width="match_parent" android:layout_height="match_parent">
                        <LinearLayout android:id="@+id/actionLayout" android:background="@color/actions_primary" android:layout_width="match_parent" android:layout_height="wrap_content" android:splitMotionEvents="false" android:paddingStart="8dp">
                            <TextView android:textSize="18sp" android:textColor="@android:color/white" android:layout_gravity="center_vertical" android:paddingTop="4dp" android:paddingBottom="4dp" android:layout_width="0dp" android:layout_height="wrap_content" android:text="@string/actions" android:layout_weight="1" android:fontFamily="@font/helvetica_standard" android:paddingStart="4dp" android:paddingEnd="8dp"/>
                            <ImageButton android:layout_gravity="center_vertical" android:id="@+id/pasteActionButton" android:background="?attr/selectableItemBackgroundBorderless" android:visibility="gone" android:layout_width="48dp" android:layout_height="48dp" android:src="@drawable/ic_content_paste_white_24dp" android:contentDescription="@string/item_pasted"/>
                            <ImageButton android:layout_gravity="center_vertical" android:id="@+id/reorderActionsButton" android:background="?attr/selectableItemBackgroundBorderless" android:visibility="gone" android:layout_width="48dp" android:layout_height="48dp" android:src="@drawable/ic_swap_vertical_white_24dp" android:contentDescription="@string/reorder_actions"/>
                            <ImageButton android:layout_gravity="center_vertical" android:id="@+id/edit_macro_expandActionsButton" android:background="?attr/selectableItemBackgroundBorderless" android:layout_width="48dp" android:layout_height="48dp" android:src="@drawable/ic_arrow_expand_white_24dp" android:contentDescription="@string/reorder_actions"/>
                            <ImageButton android:layout_gravity="center_vertical" android:id="@+id/edit_macro_addActionButton" android:background="?attr/selectableItemBackgroundBorderless" android:layout_width="48dp" android:layout_height="48dp" android:src="@drawable/ic_plus_white_24dp" android:contentDescription="@string/add_action"/>
                        </LinearLayout>
                        <View android:background="@color/hairline_header" android:layout_width="match_parent" android:layout_height="1px" android:layout_marginLeft="8dp" android:layout_marginRight="8dp" android:layout_marginBottom="2dp"/>
                        <TextView android:textSize="@dimen/no_item_text_size" android:textColor="@android:color/white" android:ellipsize="end" android:gravity="center" android:id="@+id/noActionsText" android:padding="@dimen/margin_medium" android:visibility="gone" android:layout_width="match_parent" android:layout_height="match_parent" android:text="@string/no_actions" android:singleLine="true"/>
                        <com.arlosoft.macrodroid.widget.SelectableItemsRecyclerView android:id="@+id/actionsList" android:layout_width="match_parent" android:layout_height="wrap_content" android:paddingStart="@dimen/edit_entries_list_padding" android:paddingEnd="@dimen/edit_entries_list_padding"/>
                    </LinearLayout>
                </androidx.cardview.widget.CardView>
                <androidx.cardview.widget.CardView android:id="@+id/constraintsContainer" android:layout_width="match_parent" android:layout_height="wrap_content" android:layout_marginLeft="@dimen/margin_small" android:layout_marginRight="@dimen/margin_small" android:layout_marginBottom="@dimen/margin_small" app:cardBackgroundColor="@color/constraints_primary" app:cardCornerRadius="8dp">
                    <LinearLayout android:orientation="vertical" android:layout_width="match_parent" android:layout_height="wrap_content">
                        <LinearLayout android:id="@+id/constraintsLayout" android:background="@color/constraints_primary" android:layout_width="match_parent" android:layout_height="wrap_content" android:splitMotionEvents="false" android:paddingStart="8dp">
                            <TextView android:textSize="18sp" android:textColor="@android:color/white" android:layout_gravity="center_vertical" android:paddingTop="4dp" android:paddingBottom="4dp" android:layout_width="0dp" android:layout_height="wrap_content" android:text="@string/constraints" android:layout_weight="1" android:fontFamily="@font/helvetica_standard" android:paddingStart="4dp" android:paddingEnd="8dp"/>
                            <Spinner android:entries="@array/constraint_and_or_options" android:layout_gravity="center_vertical" android:id="@+id/constraintAndOrSpinner" android:layout_width="wrap_content" android:layout_height="wrap_content" android:paddingStart="10dp" android:layout_marginEnd="12dp" style="@style/Spinner.White"/>
                            <ImageButton android:layout_gravity="center_vertical" android:id="@+id/pasteConstraintButton" android:background="?attr/selectableItemBackgroundBorderless" android:padding="4dp" android:visibility="gone" android:layout_width="wrap_content" android:layout_height="wrap_content" android:src="@drawable/ic_content_paste_white_24dp" android:contentDescription="@string/item_pasted" android:layout_marginEnd="8dp"/>
                            <ImageButton android:layout_gravity="center_vertical" android:id="@+id/reorderConstraintsButton" android:background="?attr/selectableItemBackgroundBorderless" android:visibility="gone" android:layout_width="48dp" android:layout_height="48dp" android:src="@drawable/ic_swap_vertical_white_24dp" android:contentDescription="@string/reorder"/>
                            <ImageButton android:id="@+id/edit_macro_addConstraintButton" android:background="?attr/selectableItemBackgroundBorderless" android:layout_width="48dp" android:layout_height="48dp" android:src="@drawable/ic_plus_white_24dp" android:contentDescription="@string/add_constraint"/>
                        </LinearLayout>
                        <View android:background="@color/hairline_header" android:layout_width="match_parent" android:layout_height="1px" android:layout_marginLeft="8dp" android:layout_marginRight="8dp" android:layout_marginBottom="2dp"/>
                        <TextView android:textSize="@dimen/no_item_text_size" android:textColor="@android:color/white" android:ellipsize="end" android:gravity="center" android:id="@+id/noConstraintsText" android:padding="@dimen/margin_medium" android:visibility="gone" android:layout_width="match_parent" android:layout_height="match_parent" android:text="@string/no_constraints" android:singleLine="true"/>
                        <com.arlosoft.macrodroid.widget.SelectableItemsRecyclerView android:id="@+id/constraintsList" android:layout_width="match_parent" android:layout_height="wrap_content" android:paddingStart="@dimen/edit_entries_list_padding" android:paddingEnd="@dimen/edit_entries_list_padding"/>
                    </LinearLayout>
                </androidx.cardview.widget.CardView>
                <androidx.cardview.widget.CardView android:id="@+id/varsInlineContainer" android:layout_width="match_parent" android:layout_height="wrap_content" android:layout_marginLeft="@dimen/margin_small" android:layout_marginRight="@dimen/margin_small" android:layout_marginBottom="@dimen/margin_small" app:cardBackgroundColor="@color/local_vars_primary" app:cardCornerRadius="8dp"/>
            </LinearLayout>
        </com.arlosoft.macrodroid.widget.LockableScrollView>
        <include android:id="@+id/bottomBar" layout="@layout/bottom_sheet_variables"/>
        <com.google.android.material.floatingactionbutton.FloatingActionButton android:id="@+id/acceptButton" android:layout_width="wrap_content" android:layout_height="wrap_content" android:src="@drawable/ic_action_accept_white" android:tint="@color/primary" android:cropToPadding="false" android:contentDescription="@string/accept" android:layout_marginEnd="@dimen/margin_medium" app:backgroundTint="@color/white" app:layout_anchor="@+id/bottomBar" app:layout_anchorGravity="800035"/>
        <FrameLayout android:id="@+id/content_overlay" android:visibility="gone" android:layout_width="match_parent" android:layout_height="match_parent"/>
        <FrameLayout android:id="@+id/disabledViewCover" android:background="@color/disabled_view_cover" android:visibility="gone" android:layout_width="match_parent" android:layout_height="match_parent"/>
    </androidx.coordinatorlayout.widget.CoordinatorLayout>
    <RelativeLayout android:id="@+id/triggerOverlay" android:background="#00000000" android:visibility="visible" android:layout_width="match_parent" android:layout_height="match_parent"/>
</FrameLayout>
